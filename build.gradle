/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */

plugins {
  id "java"
}

sourceCompatibility = '1.11'
targetCompatibility = '1.11'

task copy(type: Copy, group: "Custom", description: "Copie les sources dans le repertoire dest") {
  from "minischeme"
  into "dest"
}

task zip(type: Zip, group: "Archive", description: "Les sources sont archivees dans un fichier zip") {
  from "minischeme"
  setArchiveFileName "futuregadgetlab1.0"
}

task uberJar(type: Jar) {
  manifest {
    attributes 'Main-Class': 'Application'
  }
  appendix = 'dependencies-all'
  from sourceSets.main.output
  dependsOn configurations.runtimeClasspath
  from {
    configurations.runtimeClasspath
      .findAll {it.name.endsWith('jar')}
      .collect {zipTree(it)}
  }
}

test {
  useJUnitPlatform()
}

dependencies {
  testImplementation 'org.junit.jupiter:junit-jupiter-api:5.4.2'
  testRuntimeOnly 'org.junit.jupiter:junit:junit-jupiter-engine:5.4.2'
}

repositories {
  mavenCentral()
}

jar {
  manifest {
    attributes 'Main-Class': 'Application'
  }
}
